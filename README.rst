
wm8731
======

- Generated with `MrT Device Utility <https://github.com/uprev-mrt/mrtutils/wiki/mrt-device>`_
- Bus:  I2C, SPI
- RegMap: `Register Map <Regmap.html>`_
- Datasheet: `https://statics.cirrus.c... <https://statics.cirrus.com/pubs/proDatasheet/WM8731_v4.9.pdf>`_
- DigiKey: `WM8731CSEFL-ND <https://www.digikey.com/products/en?KeyWords=WM8731CSEFL-ND>`_
- I2C Address: 0x34


Description
-----------

Aduio codec

.. *user-block-description-start*

.. *user-block-description-end*





Register Map
------------

=================     ================     ================     ================     ================     ================
Name                    Address             Type                  Access              Default               Description
=================     ================     ================     ================     ================     ================
LEFT_IN_               0x00                 uint16               W                    0x0097               Left line in control 
RIGHT_IN_              0x01                 uint16               W                    0x0097               Right line in control
LEFT_OUT_              0x02                 uint16               W                    0x0079               Left Headphone Out control
RIGHT_OUT_             0x03                 uint16               W                    0x0079               Right Headphone Out control
AN_PATH_               0x04                 uint16               W                    0x000A               analog audio path control
DIG_PATH_              0x05                 uint16               W                    0x0008               Digital audio path control
POWER_DWN_             0x06                 uint16               W                    0x009F               Power Down control   
DIG_IFACE_             0x07                 uint16               W                    0x009F               Digital audio interface format
SAMPLE_                0x08                 uint16               W                    0x0000               Sampling control     
ACTIVE_                0x09                 uint16               W                    0x0000               Active Control       
RESET_                 0x0F                 uint16               W                    0x0FFF               Reset control        
=================     ================     ================     ================     ================     ================





Registers
---------





----------

.. _LEFT_IN:

LEFT_IN
-------

:Address: **[0x00]**
:Default: **[0x0097]**

Left line in control

.. *user-block-left_in-start*

.. *user-block-left_in-end*

+------------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
|Bit         |15      |14      |13      |12      |11      |10      |9       |8       |7       |6       |5       |4       |3       |2       |1       |0       |
+============+========+========+========+========+========+========+========+========+========+========+========+========+========+========+========+========+
| **Field**  |                                                     |LRINBOTH|MUTE                      |VOLUME                                               |
+------------+-----------------------------------------------------+--------+--------------------------+-----------------------------------------------------+

Flags
~~~~~

:MUTE: Mutes Left input
:LRINBOTH: Left to Right Channel Line Input Volume and Mute Data Load Control

Fields
~~~~~~

:VOLUME: Volume control for Left input in 1.5dB steps range -34.5dB -> +12dB

=====================     ================     ================================================================
Name                       Value               Descriptions
=====================     ================     ================================================================
MIN                         b00000                  -34.5dB
0dB                         b10101                  0db Gain
MAX                         b11111                  +12dB
STEP                        b00001                  1.5dB Step
=====================     ================     ================================================================




----------

.. _RIGHT_IN:

RIGHT_IN
--------

:Address: **[0x01]**
:Default: **[0x0097]**

Right line in control

.. *user-block-right_in-start*

.. *user-block-right_in-end*

+------------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
|Bit         |15      |14      |13      |12      |11      |10      |9       |8       |7       |6       |5       |4       |3       |2       |1       |0       |
+============+========+========+========+========+========+========+========+========+========+========+========+========+========+========+========+========+
| **Field**  |                                                     |LRINBOTH|MUTE                      |VOLUME                                               |
+------------+-----------------------------------------------------+--------+--------------------------+-----------------------------------------------------+

Flags
~~~~~

:MUTE: Mutes Right input
:LRINBOTH: Left to Right Channel Line Input Volume and Mute Data Load Control

Fields
~~~~~~

:VOLUME: Volume control for right input in 1.5dB steps range -34.5dB -> +12dB

=====================     ================     ================================================================
Name                       Value               Descriptions
=====================     ================     ================================================================
MIN                         b00000                  minimum -34.5dB
0dB                         b10101                  0db Gain
MAX                         b11111                  maximum +12dB
STEP                        b00001                  1.5dB Step
=====================     ================     ================================================================




----------

.. _LEFT_OUT:

LEFT_OUT
--------

:Address: **[0x02]**
:Default: **[0x0079]**

Left Headphone Out control

.. *user-block-left_out-start*

.. *user-block-left_out-end*

+------------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
|Bit         |15      |14      |13      |12      |11      |10      |9       |8       |7       |6       |5       |4       |3       |2       |1       |0       |
+============+========+========+========+========+========+========+========+========+========+========+========+========+========+========+========+========+
| **Field**  |                                                                                                                                               |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------+


Fields
~~~~~~

:LEFT_OUT: Left Headphone Out control



----------

.. _RIGHT_OUT:

RIGHT_OUT
---------

:Address: **[0x03]**
:Default: **[0x0079]**

Right Headphone Out control

.. *user-block-right_out-start*

.. *user-block-right_out-end*

+------------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+---------+
|Bit         |15       |14       |13       |12       |11       |10       |9        |8        |7        |6        |5        |4        |3        |2        |1        |0        |
+============+=========+=========+=========+=========+=========+=========+=========+=========+=========+=========+=========+=========+=========+=========+=========+=========+
| **Field**  |                                                                                                                                                               |
+------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+


Fields
~~~~~~

:RIGHT_OUT: Right Headphone Out control



----------

.. _AN_PATH:

AN_PATH
-------

:Address: **[0x04]**
:Default: **[0x000A]**

analog audio path control

.. *user-block-an_path-start*

.. *user-block-an_path-end*

+------------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
|Bit         |15      |14      |13      |12      |11      |10      |9       |8       |7       |6       |5       |4       |3       |2       |1       |0       |
+============+========+========+========+========+========+========+========+========+========+========+========+========+========+========+========+========+
| **Field**  |                                                              |SIDEATT          |SIDETONE|DACSEL  |BYPASS  |INSEL   |MUTEMIC |MICBOOST         |
+------------+--------------------------------------------------------------+-----------------+--------+--------+--------+--------+--------+-----------------+

Flags
~~~~~

:MICBOOST: Microphone Input Level Boost
:MUTEMIC: Mute Mic input to ADC
:INSEL: Selects input between Mic and Line-in
:BYPASS: Combines Line-in signal to Output
:DACSEL: DAC Select
:SIDETONE: Combines Mic signal to Output

Fields
~~~~~~

:SIDEATT: Side Tone attenuation

=====================     ================     ================================================================
Name                       Value               Descriptions
=====================     ================     ================================================================
6dB                         b00                     6dB of attenuation
9dB                         b01                     9dB of attenuation
12dB                        b10                     12dB of attenuation
15dB                        b11                     15dB of attenuation
=====================     ================     ================================================================




----------

.. _DIG_PATH:

DIG_PATH
--------

:Address: **[0x05]**
:Default: **[0x0008]**

Digital audio path control

.. *user-block-dig_path-start*

.. *user-block-dig_path-end*

+------------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+
|Bit         |15    |14    |13    |12    |11    |10    |9     |8     |7     |6     |5     |4     |3     |2     |1     |0     |
+============+======+======+======+======+======+======+======+======+======+======+======+======+======+======+======+======+
| **Field**  |                                                                     |HPOR  |DACMU |DEEMP        |ADCHPD       |
+------------+---------------------------------------------------------------------+------+------+-------------+-------------+

Flags
~~~~~

:ADCHPD: ADC High Pass Filter
:DACMU: DAC Soft Mute
:HPOR: Store dc offset when High Pass Filter disabled

Fields
~~~~~~

:DEEMP: De-emphasis Control

=====================     ================     ================================================================
Name                       Value               Descriptions
=====================     ================     ================================================================
DIS                         b00                     Disable
32kHz                       b01                     32 kHz
44_1kHz                     b10                     44.1 kHz
48kHz                       b11                     48 kHz
=====================     ================     ================================================================




----------

.. _POWER_DWN:

POWER_DWN
---------

:Address: **[0x06]**
:Default: **[0x009F]**

Power Down control

.. *user-block-power_dwn-start*

.. *user-block-power_dwn-end*

+------------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+--------+
|Bit         |15      |14      |13      |12      |11      |10      |9       |8       |7       |6       |5       |4       |3       |2       |1       |0       |
+============+========+========+========+========+========+========+========+========+========+========+========+========+========+========+========+========+
| **Field**  |                                                              |POWEROFF|CLKOUTPD|OSCPD   |OUTPD   |DACPD   |ADCPD   |MICPD   |LINEINPD         |
+------------+--------------------------------------------------------------+--------+--------+--------+--------+--------+--------+--------+-----------------+

Flags
~~~~~

:LINEINPD: Line Input Power Down
:MICPD: Microphone Input an Bias PowerDown
:ADCPD: ADC Power Dow
:DACPD: DAC Power Down
:OUTPD: Powers down ALL outputs including digital
:OSCPD: Oscillator Power Down
:CLKOUTPD: CLKOUT power down
:POWEROFF: POWEROFF mode



----------

.. _DIG_IFACE:

DIG_IFACE
---------

:Address: **[0x07]**
:Default: **[0x009F]**

Digital audio interface format

.. *user-block-dig_iface-start*

.. *user-block-dig_iface-end*

+------------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+
|Bit         |15         |14         |13         |12         |11         |10         |9          |8          |7          |6          |5          |4          |3          |2          |1          |0          |
+============+===========+===========+===========+===========+===========+===========+===========+===========+===========+===========+===========+===========+===========+===========+===========+===========+
| **Field**  |                                                                                   |BLCKINV    |MASTER_MODE|LRSWAP     |LRP        |IWL                    |FORMAT                             |
+------------+-----------------------------------------------------------------------------------+-----------+-----------+-----------+-----------+-----------------------+-----------------------------------+

Flags
~~~~~

:BLCKINV: Inverts the bit clock
:MASTER_MODE: Enables Master mode
:LRSWAP: Swaps LR clock polarity
:LRP: DACLRC phase control (in left, right or I2S modes)

Fields
~~~~~~

:IWL: Word Length. Audio data size

=====================     ================     ================================================================
Name                       Value               Descriptions
=====================     ================     ================================================================
32BIT                       b11                     32 bit sample size
24BIT                       b10                     24 bit sample size
20BIT                       b01                     20 bit sample size
16BIT                       b00                     16 bit sample size
=====================     ================     ================================================================



:FORMAT: Selects digital audio format

=====================     ================     ================================================================
Name                       Value               Descriptions
=====================     ================     ================================================================
RIGHT_JUST                  b00                     MSB-First right justified
LEFT_JUST                   b01                     MSB-first left justified
I2S                         b10                     I2S format. MSB-First left -1 justified
DSP                         b11                     DSP Mode. frame sync + 2 data packed words
=====================     ================     ================================================================




----------

.. _SAMPLE:

SAMPLE
------

:Address: **[0x08]**
:Default: **[0x0000]**

Sampling control

.. *user-block-sample-start*

.. *user-block-sample-end*

+------------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+
|Bit         |15    |14    |13    |12    |11    |10    |9     |8     |7     |6     |5     |4     |3     |2     |1     |0     |
+============+======+======+======+======+======+======+======+======+======+======+======+======+======+======+======+======+
| **Field**  |                                                                                                               |
+------------+---------------------------------------------------------------------------------------------------------------+


Fields
~~~~~~

:SAMPLE: Sampling control



----------

.. _ACTIVE:

ACTIVE
------

:Address: **[0x09]**
:Default: **[0x0000]**

Active Control

.. *user-block-active-start*

.. *user-block-active-end*

+------------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+------+
|Bit         |15    |14    |13    |12    |11    |10    |9     |8     |7     |6     |5     |4     |3     |2     |1     |0     |
+============+======+======+======+======+======+======+======+======+======+======+======+======+======+======+======+======+
| **Field**  |                                                                                                 |Enable       |
+------------+-------------------------------------------------------------------------------------------------+-------------+

Flags
~~~~~

:Enable: Enables Digital Audio interface



----------

.. _RESET:

RESET
-----

:Address: **[0x0F]**
:Default: **[0x0FFF]**

Reset control

.. *user-block-reset-start*

.. *user-block-reset-end*

+------------+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
|Bit         |15   |14   |13   |12   |11   |10   |9    |8    |7    |6    |5    |4    |3    |2    |1    |0    |
+============+=====+=====+=====+=====+=====+=====+=====+=====+=====+=====+=====+=====+=====+=====+=====+=====+
| **Field**  |                                         |RESET                                                |
+------------+-----------------------------------------+-----------------------------------------------------+


Fields
~~~~~~

:RESET: Setting to 0 resets the device

